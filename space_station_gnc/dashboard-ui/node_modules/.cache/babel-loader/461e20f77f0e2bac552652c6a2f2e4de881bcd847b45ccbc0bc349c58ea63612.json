{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"row\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = {\n  key: 0,\n  class: \"toast\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h1\", null, \"GNC Control Mode\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Current Mode:\", -1 /* CACHED */)), _cache[3] || (_cache[3] = _createTextVNode()), _createElementVNode(\"span\", null, _toDisplayString($options.modeString), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"small\", null, \"Updated:\", -1 /* CACHED */)), _cache[5] || (_cache[5] = _createTextVNode()), _createElementVNode(\"span\", null, _toDisplayString($data.lastUpdate), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.desiredMode = $event)\n  }, [...(_cache[6] || (_cache[6] = [_createElementVNode(\"option\", {\n    value: 0\n  }, \"AUTO\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: 1\n  }, \"CMG\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: 2\n  }, \"THRUSTER\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.desiredMode, void 0, {\n    number: true\n  }]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.setMode && $options.setMode(...args)),\n    disabled: $data.busy\n  }, \"Set Mode\", 8 /* PROPS */, _hoisted_5)]), $data.toast ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString($data.toast), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","$options","modeString","$data","lastUpdate","_hoisted_4","desiredMode","$event","value","number","onClick","_cache","args","setMode","disabled","busy","_hoisted_5","toast","_hoisted_6"],"sources":["/home/siddarth/ssos_ws/src/space_station_os/space_station_gnc/dashboard-ui/src/views/GncControl.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>GNC Control Mode</h1>\n    <div class=\"card\">\n      <div class=\"row\">\n        <div><strong>Current Mode:</strong> <span>{{ modeString }}</span></div>\n        <div><small>Updated:</small> <span>{{ lastUpdate }}</span></div>\n      </div>\n      <div class=\"row\">\n        <select v-model.number=\"desiredMode\">\n          <option :value=\"0\">AUTO</option>\n          <option :value=\"1\">CMG</option>\n          <option :value=\"2\">THRUSTER</option>\n        </select>\n        <button @click=\"setMode\" :disabled=\"busy\">Set Mode</button>\n      </div>\n      <div v-if=\"toast\" class=\"toast\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst MODE_STR = [\"AUTO\", \"CMG\", \"THRUSTER\"];\n\nexport default {\n  name: \"GncControl\",\n  data() {\n    return {\n      ros: null,\n      mode: null,\n      desiredMode: 0,\n      lastUpdate: \"-\",\n      busy: false,\n      toast: \"\",\n    };\n  },\n  computed: {\n    modeString() {\n      return this.mode === null ? \"---\" : MODE_STR[this.mode] ?? `UNKNOWN(${this.mode})`;\n    },\n  },\n  methods: {\n    connectRos() {\n      this.ros = new window.ROSLIB.Ros({\n        url: process.env.VUE_APP_ROSBRIDGE_URL || \"ws://localhost:9090\",\n      });\n      this.ros.on(\"connection\", () => {\n        const sub = new window.ROSLIB.Topic({\n          ros: this.ros,\n          name: \"/gnc/mode_actuation\",\n          messageType: \"std_msgs/msg/String\",\n        });\n        sub.subscribe((msg) => {\n          const s = (msg.data || \"\").toLowerCase();\n          this.mode = s === \"auto\" ? 0 : s === \"cmg\" ? 1 : s === \"thruster\" ? 2 : null;\n          this.lastUpdate = new Date().toLocaleString();\n        });\n      });\n      this.ros.on(\"error\", (e) => (this.toast = `ROS error: ${e}`));\n      this.ros.on(\"close\", () => (this.toast = \"ROS connection closed\"));\n    },\n    setMode() {\n      if (this.busy) return;\n      this.busy = true;\n      const service = new window.ROSLIB.Service({\n        ros: this.ros,\n        name: \"/gnc/set_mode_actuation\",\n        serviceType: \"space_station_gnc/srv/SetGncModeActuation\",\n      });\n      const map = [\"auto\", \"cmg\", \"thruster\"];\n      const request = new window.ROSLIB.ServiceRequest({\n        mode: map[this.desiredMode] || \"auto\",\n      });\n      service.callService(\n        request,\n        (resp) => {\n          this.toast = resp.message || (resp.success ? \"Accepted\" : \"Rejected\");\n          this.busy = false;\n        },\n        (err) => {\n          this.toast = `Call failed: ${err}`;\n          this.busy = false;\n        }\n      );\n    },\n  },\n  mounted() {\n    this.connectRos();\n  },\n};\n</script>\n\n<style>\n.container {\n  max-width: 720px;\n  margin: 64px auto;\n  padding: 24px;\n  text-align: center;\n}\n\nh1 {\n  font-weight: 600;\n  font-size: 1.8rem;\n  margin-bottom: 24px;\n  letter-spacing: 1px;\n}\n\n.card {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  padding: 24px;\n  display: inline-block;\n  text-align: left;\n  box-shadow: 0 0 12px rgba(255, 255, 255, 0.1);\n}\n\n.row {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.toast {\n  margin-top: 8px;\n  font-size: 0.9rem;\n  color: #0f0;\n}\n\nbutton {\n  padding: 6px 12px;\n  background-color: #111;\n  border: 1px solid #555;\n  color: #fff;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #222;\n}\n\nselect {\n  padding: 6px 10px;\n  background-color: #111;\n  border: 1px solid #555;\n  color: #fff;\n  border-radius: 4px;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAK;;EAIXA,KAAK,EAAC;AAAK;;;;EAQEA,KAAK,EAAC;;;uBAf5BC,mBAAA,CAiBM,OAjBNC,UAiBM,G,0BAhBJC,mBAAA,CAAyB,YAArB,kBAAgB,qBACpBA,mBAAA,CAcM,OAdNC,UAcM,GAbJD,mBAAA,CAGM,OAHNE,UAGM,GAFJF,mBAAA,CAAuE,c,0BAAlEA,mBAAA,CAA8B,gBAAtB,eAAa,qB,+CAAUA,mBAAA,CAA6B,cAAAG,gBAAA,CAApBC,QAAA,CAAAC,UAAU,iB,GACvDL,mBAAA,CAAgE,c,0BAA3DA,mBAAA,CAAuB,eAAhB,UAAQ,qB,+CAASA,mBAAA,CAA6B,cAAAG,gBAAA,CAApBG,KAAA,CAAAC,UAAU,iB,KAElDP,mBAAA,CAOM,OAPNQ,UAOM,G,gBANJR,mBAAA,CAIS;+DAJeM,KAAA,CAAAG,WAAW,GAAAC,MAAA;qCACjCV,mBAAA,CAAgC;IAAvBW,KAAK,EAAE;EAAC,GAAE,MAAI,oBACvBX,mBAAA,CAA+B;IAAtBW,KAAK,EAAE;EAAC,GAAE,KAAG,oBACtBX,mBAAA,CAAoC;IAA3BW,KAAK,EAAE;EAAC,GAAE,UAAQ,mB,6CAHLL,KAAA,CAAAG,WAAW,E;IAAnBG,MAAM,EAAd;EAA4B,E,IAKpCZ,mBAAA,CAA2D;IAAlDa,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEX,QAAA,CAAAY,OAAA,IAAAZ,QAAA,CAAAY,OAAA,IAAAD,IAAA,CAAO;IAAGE,QAAQ,EAAEX,KAAA,CAAAY;KAAM,UAAQ,iBAAAC,UAAA,E,GAEzCb,KAAA,CAAAc,KAAK,I,cAAhBtB,mBAAA,CAAiD,OAAjDuB,UAAiD,EAAAlB,gBAAA,CAAdG,KAAA,CAAAc,KAAK,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}