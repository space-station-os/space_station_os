(function(){"use strict";var t={356:function(t,e,o){var n=o(751),s=o(641);function r(t,e,o,n,r,i){const a=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(a)}var i={name:"App"},a=o(262);const u=(0,a.A)(i,[["render",r]]);var c=u,d=o(499),l=o(33);const h={class:"container"},v={class:"card"},f={class:"row"},p={class:"row"},m=["disabled"],b={key:0,class:"toast"};function w(t,e,o,r,i,a){return(0,s.uX)(),(0,s.CE)("div",h,[e[7]||(e[7]=(0,s.Lk)("h1",null,"GNC Control Mode",-1)),(0,s.Lk)("div",v,[(0,s.Lk)("div",f,[(0,s.Lk)("div",null,[e[2]||(e[2]=(0,s.Lk)("strong",null,"Current Mode:",-1)),e[3]||(e[3]=(0,s.eW)()),(0,s.Lk)("span",null,(0,l.v_)(a.modeString),1)]),(0,s.Lk)("div",null,[e[4]||(e[4]=(0,s.Lk)("small",null,"Updated:",-1)),e[5]||(e[5]=(0,s.eW)()),(0,s.Lk)("span",null,(0,l.v_)(i.lastUpdate),1)])]),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.desiredMode=t)},[...e[6]||(e[6]=[(0,s.Lk)("option",{value:0},"AUTO",-1),(0,s.Lk)("option",{value:1},"CMG",-1),(0,s.Lk)("option",{value:2},"THRUSTER",-1)])],512),[[n.u1,i.desiredMode,void 0,{number:!0}]]),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>a.setMode&&a.setMode(...t)),disabled:i.busy},"Set Mode",8,m)]),i.toast?((0,s.uX)(),(0,s.CE)("div",b,(0,l.v_)(i.toast),1)):(0,s.Q3)("",!0)])])}const g=["AUTO","CMG","THRUSTER"];var L={name:"GncControl",data(){return{ros:null,mode:null,desiredMode:0,lastUpdate:"-",busy:!1,toast:""}},computed:{modeString(){return null===this.mode?"---":g[this.mode]??`UNKNOWN(${this.mode})`}},methods:{connectRos(){this.ros=new window.ROSLIB.Ros({url:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_ROSBRIDGE_URL||"ws://localhost:9090"}),this.ros.on("connection",()=>{const t=new window.ROSLIB.Topic({ros:this.ros,name:"/gnc/mode_actuation",messageType:"std_msgs/msg/String"});t.subscribe(t=>{const e=(t.data||"").toLowerCase();this.mode="auto"===e?0:"cmg"===e?1:"thruster"===e?2:null,this.lastUpdate=(new Date).toLocaleString()})}),this.ros.on("error",t=>this.toast=`ROS error: ${t}`),this.ros.on("close",()=>this.toast="ROS connection closed")},setMode(){if(this.busy)return;this.busy=!0;const t=new window.ROSLIB.Service({ros:this.ros,name:"/gnc/set_mode_actuation",serviceType:"space_station_gnc/srv/SetGncModeActuation"}),e=["auto","cmg","thruster"],o=new window.ROSLIB.ServiceRequest({mode:e[this.desiredMode]||"auto"});t.callService(o,t=>{this.toast=t.message||(t.success?"Accepted":"Rejected"),this.busy=!1},t=>{this.toast=`Call failed: ${t}`,this.busy=!1})}},mounted(){this.connectRos()}};const k=(0,a.A)(L,[["render",w]]);var O=k;const R=[{path:"/",name:"GncControl",component:O}],S=(0,d.aE)({history:(0,d.LA)(),routes:R});var y=S;(0,n.Ef)(c).use(y).mount("#app")}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,n,s,r){if(!n){var i=1/0;for(d=0;d<t.length;d++){n=t[d][0],s=t[d][1],r=t[d][2];for(var a=!0,u=0;u<n.length;u++)(!1&r||i>=r)&&Object.keys(o.O).every(function(t){return o.O[t](n[u])})?n.splice(u--,1):(a=!1,r<i&&(i=r));if(a){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[n,s,r]}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,r,i=n[0],a=n[1],u=n[2],c=0;if(i.some(function(e){return 0!==t[e]})){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(u)var d=u(o)}for(e&&e(n);c<i.length;c++)r=i[c],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(d)},n=self["webpackChunkgnc_dashboard_ui"]=self["webpackChunkgnc_dashboard_ui"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],function(){return o(356)});n=o.O(n)})();
//# sourceMappingURL=app.7b9ec903.js.map